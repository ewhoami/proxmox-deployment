### Автор: Орлов Дмитрий ###

Данный набор скриптов предназначен для автоматизации развертывания и проверки стендов на Proxmox VE в рамках первого
модуля демонстрационного экзамена по специальности 09.02.06 "Системное и сетевое администрирование".

### Инструкция ###
Для запуска необходимо установить Python.

1. Установка зависимостей

pip install proxmoxer / apt install python3-proxmoxer

pip install requests / apt isntall python3-requests

2. Преднастрйка стенда

В ходе разработки возникла проблема, связанная с невозможностью создания снапшота для виртуальной машины, использующей Debian 11.11. Проблема заключается в том, что по умолчанию Proxmox создает диск ВМ в формате raw, который не поддерживает создание снапшотов. Поскольку инфраструктура создаётся на основе шаблона с клонированием, требуется формат qcow2. Чтобы обойти это ограничение, необходимо предварительно подготовить хранилище. Один из способов — настроить стандартное хранилище так, чтобы оно поддерживало хранение дисков виртуальных машин. Это делается через веб-интерфейс Proxmox, где в параметрах хранилища включается соответствующий тип содержимого. Альтернативный вариант — в настройках дисков узла выбрать вкладку «Directory» и создать директорию на пустом диске, после чего выполнить настройку аналогичную предыдущему варианту.

3. Настройки

Настройки находятся в файле settings.py

4. Запуск скриптов

python3 proxmox_deploy.py - запуск скрипта развертывания
python3 check.py - запуск скрипта проверки
python3 remove.py - запуск скрипта удаления созданной инфраструктуры

5. Обработка ошибок

В proxmox_deploy.py сохраняется каждый этап развертывания, что позволяет продолжить его выполнение после ошибки/остановки.
В check.py нет обработки ошибок, т.к. данный скрипт никак не влияет на целостность инфраструктуры и каждое его
выполнение перезаписывает предыдущий файл с результатами (для конкретного сервера и нода).
В remove.py предусмотрены только ошибки, связанные с отсутствием удаляемых объектов на сервере.
